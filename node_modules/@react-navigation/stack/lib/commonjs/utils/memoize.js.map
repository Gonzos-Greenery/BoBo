{"version":3,"sources":["memoize.tsx"],"names":["memoize","callback","previous","result","hasChanged","dependencies","length","i","undefined"],"mappings":";;;;;;;AAAe,SAASA,OAAT,CACbC,QADa,EAEb;AACA,MAAIC,QAAJ;AACA,MAAIC,MAAJ;AAEA,SAAO,YAAmC;AACxC,QAAIC,UAAU,GAAG,KAAjB;;AADwC,sCAA/BC,YAA+B;AAA/BA,MAAAA,YAA+B;AAAA;;AAGxC,QAAIH,QAAJ,EAAc;AACZ,UAAIA,QAAQ,CAACI,MAAT,KAAoBD,YAAY,CAACC,MAArC,EAA6C;AAC3CF,QAAAA,UAAU,GAAG,IAAb;AACD,OAFD,MAEO;AACL,aAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,QAAQ,CAACI,MAA7B,EAAqCC,CAAC,EAAtC,EAA0C;AACxC,cAAIL,QAAQ,CAACK,CAAD,CAAR,KAAgBF,YAAY,CAACE,CAAD,CAAhC,EAAqC;AACnCH,YAAAA,UAAU,GAAG,IAAb;AACA;AACD;AACF;AACF;AACF,KAXD,MAWO;AACLA,MAAAA,UAAU,GAAG,IAAb;AACD;;AAEDF,IAAAA,QAAQ,GAAGG,YAAX;;AAEA,QAAID,UAAU,IAAID,MAAM,KAAKK,SAA7B,EAAwC;AACtCL,MAAAA,MAAM,GAAGF,QAAQ,CAAC,GAAGI,YAAJ,CAAjB;AACD;;AAED,WAAOF,MAAP;AACD,GAzBD;AA0BD","sourcesContent":["export default function memoize<Result, Deps extends readonly any[]>(\n  callback: (...deps: Deps) => Result\n) {\n  let previous: Deps | undefined;\n  let result: Result | undefined;\n\n  return (...dependencies: Deps): Result => {\n    let hasChanged = false;\n\n    if (previous) {\n      if (previous.length !== dependencies.length) {\n        hasChanged = true;\n      } else {\n        for (let i = 0; i < previous.length; i++) {\n          if (previous[i] !== dependencies[i]) {\n            hasChanged = true;\n            break;\n          }\n        }\n      }\n    } else {\n      hasChanged = true;\n    }\n\n    previous = dependencies;\n\n    if (hasChanged || result === undefined) {\n      result = callback(...dependencies);\n    }\n\n    return result;\n  };\n}\n"]}